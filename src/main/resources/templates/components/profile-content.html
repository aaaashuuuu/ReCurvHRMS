<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
<div th:fragment>
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">My Profile</h1>
    </div>

    <div class="row">
        <div class="col-md-8 mx-auto">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">User Profile Details</h4>
                </div>
                <div class="card-body">
                    <!-- Display user details if available -->
                    <div th:if="${userDetails}" class="row">
                        <div class="col-md-6">
                            <h6>Personal Information</h6>
                            <p><strong>User ID:</strong> <span th:text="${userDetails.userId}"></span></p>
                            <p><strong>First Name:</strong> <span th:text="${userDetails.firstName}"></span></p>
                            <p><strong>Last Name:</strong> <span th:text="${userDetails.lastName}"></span></p>
                            <p><strong>Email:</strong> <span th:text="${userDetails.email}"></span></p>
                        </div>
                        <div class="col-md-6">
                            <h6>Role & Status</h6>
                            <p><strong>Role:</strong> <span th:text="${userDetails.role}"></span></p>
                            <p><strong>Status:</strong>
                                <span th:if="${userDetails.status == 'ACTIVE'}" class="badge bg-success">ACTIVE</span>
                                <span th:if="${userDetails.status == 'INACTIVE'}" class="badge bg-danger">INACTIVE</span>
                            </p>
                        </div>
                    </div>

                    <!-- Fallback if user details not available -->
                    <div th:unless="${userDetails}" class="alert alert-warning">
                        <p><strong>Email:</strong> <span th:text="${userEmail}"></span></p>
                        <p>Additional user details not available.</p>
                    </div>

                    <hr>

                    <div class="mt-3">
                        <h6>Authentication Information</h6>
                        <p class="text-success">âœ… You are successfully authenticated!</p>
                        <p class="text-muted">This page is protected and requires valid JWT token to access.</p>
                    </div>

                    <div class="mt-4">
                        <a th:href="@{/dashboard}" class="btn btn-primary">Go to Dashboard</a>
                        <a th:href="@{/profile}" class="btn btn-outline-secondary">Refresh Profile</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>