<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Payslip History</title>

<!-- Bootstrap 5 CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet" />

<!-- FontAwesome -->
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
	rel="stylesheet" />

<style>
.container {
	max-width: 1100px;
	margin-top: 30px;
}

.table-responsive {
	max-height: 600px;
	overflow-y: auto;
	background: #fff;
	padding: 20px;
	border-radius: 12px;
	box-shadow: 0 3px 10px rgb(0 0 0/ 8%);
}

.btn-view {
	background-color: #0d6efd;
	color: #fff;
	font-weight: 500;
	border-radius: 8px;
	transition: all 0.3s;
}

.btn-view:hover {
	background-color: #0b5ed7;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.btn-download {
	background-color: #198754;
	color: #fff;
	font-weight: 500;
	border-radius: 8px;
	transition: all 0.3s;
}

.btn-download:hover {
	background-color: #146c43;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}
</style>
</head>
<body>
	<div class="container">

		<h3 class="mb-4">
			<span th:switch="${role}"> <span th:case="'Admin'">All
					Employees Payslips</span> <span th:case="'Manager'">All Employees
					Payslips</span> <span th:case="*">My Payslips</span>
			</span>
		</h3>

		<div class="table-responsive">
			<table class="table table-hover align-middle">
				<thead class="table-light text-center">
					<tr>
						<!-- <th th:if="${role == 'Admin' or role == 'Manager'}" scope="col">Employee</th> -->
						<th scope="col">Month / Year</th>
						<th scope="col">Action</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="p : ${payslipList}" class="text-center">
						<td th:if="${role == 'ADMIN' or role == 'MANAGER'}"
							th:text="${p.user.firstName + ' ' + p.user.lastName}">John
							Doe</td>

						<td th:text="${#dates.format(#dates.create(0, p.month, 1), 'MMMM') + '/' + p.year}">October/2025</td>

						
						<td><a
							th:href="@{'/payroll/PayslipDownload'(payslipId=${p.payslipId})}"
							target="_blank" class="btn btn-sm btn-view"> <i
								class="fas fa-eye"></i> View
						</a> <a
							th:href="@{'/payroll/PayslipDownload'(payslipId=${p.payslipId}, download='true')}"
							download class="btn btn-sm btn-download"> <i
								class="fas fa-download"></i> Download
						</a></td>
					</tr>
				</tbody>
			</table>
		</div>

	</div>

	<!-- Bootstrap Bundle JS -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
